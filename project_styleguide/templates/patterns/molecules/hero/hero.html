{% load wagtailcore_tags wagtailimages_tags locale_tags %}

{% firstof page.hero_image page.main_image hero_test_image as hero_image %}
<div class="hero
    {% if hero_color %} hero--{{ hero_color }} {% endif %}
    {% if hero_short %} hero--short            {% endif %}
    {% if hero_image %} hero--with-image       {% endif %}
    {% if classes    %} {{ classes }}          {% endif %}
    {% if page.get_ancestors|length > 1 %}hero--breadcrumb{% endif %}
    ">
    <div class="hero__wrapper wrapper wrapper--large wrapper--padding wrapper--relative">
        <div class="hero__inner">
            {% if settings.utils.SystemMessagesSettings.show_notification %}
                {% include "patterns/atoms/site-notification/site-notification.html" %}
            {% endif %}

            {% include "../navigation/breadcrumbs.html"%}

            <h1 class="hero__title">
                {% if hero_title %}
                    {{ hero_title }}
                {% elif manual_page %}
                    {{ manual.title }}
                {% elif search_page %}
                    Search Results
                {% elif page_404 %}
                    {{ settings.utils.SystemMessagesSettings.title_404 }}
                {% else %}
                    {{ page.title }}
                {% endif %}
            </h1>

            {% language_switcher %}
        </div>

        {% if hero_image %}
            {% if page.hero_image %}
                {% image page.hero_image fill-1024x574 as bg_image %}
            {% elif page.main_image %}
                {% image page.main_image fill-1024x574 as bg_image %}
            {% elif hero_test_image %}
                {% image hero_test_image fill-1024x574 as bg_image %}
            {% endif %}
            <div class="hero__image" style="background-image: url({{ bg_image.url }})">
            </div>
        {% endif %}
    </div>


    <div class="hero__pattern-wrapper {% if pattern_bottom %}hero__pattern-wrapper--bottom{% endif %}">
        {% if pattern == "dots" %}
            {% include "patterns/atoms/svg/patterns/pattern-dots.html" with classes="pattern" %}
        {% elif pattern == "egg" %}
            {% include "patterns/atoms/svg/patterns/pattern-eggs.html" with classes="pattern" %}
        {% elif pattern == "none" %}
            
        {% else %}
            {% include "patterns/atoms/svg/patterns/pattern-arrow.html" with classes="pattern" %}
        {% endif %}
    </div>
</div>
